(function(e){function t(t){for(var a,o,u=t[0],i=t[1],c=t[2],d=0,p=[];d<u.length;d++)o=u[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&p.push(n[o][0]),n[o]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);l&&l(t);while(p.length)p.shift()();return s.push.apply(s,c||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],a=!0,u=1;u<r.length;u++){var i=r[u];0!==n[i]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},n={app:0},s=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/youtube-search/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],i=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var l=i;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"1b46":function(e,t,r){"use strict";r("fd19")},5061:function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("Navbar"),r("br"),r("router-view")],1)},s=[],o=r("5530"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-menu",{attrs:{mode:"horizontal"}},[a("div",{staticClass:"el-menu-bundle"},[a("img",{staticClass:"logo",attrs:{src:r("9b19"),alt:"Logo"}}),a("el-menu-item",{attrs:{index:"1"},on:{click:function(t){return e.$router.push("/main")}}},[e._v("Поиск")]),a("el-menu-item",{attrs:{index:"2"},on:{click:function(t){return e.$router.push("/favorite")}}},[e._v("Избранное")])],1),a("div",{staticClass:"el-menu-bundle"},[a("el-menu-item",{attrs:{index:"3"},on:{click:e.logout}},[e._v("Выйти")])],1)])},i=[],c=r("2f62"),l={data:function(){return{activeIndex:"1",activeIndex2:"1"}},methods:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["loginOut"])),{},{logout:function(){this.loginOut(),this.$router.push("/")}})},d=l,p=(r("cfd1"),r("2877")),f=Object(p["a"])(d,u,i,!1,null,"5259c35a",null),m=f.exports,h={components:{Navbar:m},methods:Object(o["a"])({},Object(c["b"])(["updateUser"])),mounted:function(){localStorage.getItem("currentUser")&&this.updateUser(JSON.parse(localStorage.getItem("currentUser")))}},v=h,b=(r("5c0b"),Object(p["a"])(v,n,s,!1,null,null,null)),y=b.exports,_=r("8c4f"),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-form",{attrs:{"label-position":"top",size:"medium",model:e.userProp}},[a("el-form-item",[a("img",{attrs:{src:r("9b19"),alt:"Logo"}})]),a("el-form-item",[a("h1",[e._v("Вход")])]),a("el-form-item",{attrs:{label:"Логин"}},[a("el-input",{model:{value:e.userProp.name,callback:function(t){e.$set(e.userProp,"name","string"===typeof t?t.trim():t)},expression:"userProp.name"}})],1),a("el-form-item",{attrs:{label:"Пароль"}},[a("el-input",{attrs:{"show-password":""},model:{value:e.userProp.password,callback:function(t){e.$set(e.userProp,"password","string"===typeof t?t.trim():t)},expression:"userProp.password"}})],1),a("el-form-item",{attrs:{label:"Youtube API key"}},[a("el-input",{model:{value:e.userProp.APIKey,callback:function(t){e.$set(e.userProp,"APIKey","string"===typeof t?t.trim():t)},expression:"userProp.APIKey"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.login(e.userProp.name,e.userProp.password)}}},[e._v("Login")])],1)],1)],1)},O=[],x=(r("7db0"),r("d3b7"),r("b0c0"),r("e9c4"),{data:function(){return{userProp:{name:"",password:"",APIKey:""}}},computed:Object(o["a"])({},Object(c["c"])({users:function(e){return e.users}})),methods:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["updateUser"])),{},{login:function(e,t){var r=this,a=this.users.find((function(t){return t.name===e}));if(a)return this.userProp.APIKey.length?void(a.password===t?(a.APIKey=this.userProp.APIKey,localStorage.setItem("currentUser",JSON.stringify(a)),this.updateUser(a),this.$message({message:"Успешный вход.",type:"success"}),setTimeout((function(){r.$router.push("/main")}),500)):this.$message.error("Пароль введен неверно.")):(this.$message.error("Для использования функционала необходим действующий Youtube API ключ. Ссылка в консоли."),void console.log("https://developers.google.com/youtube/v3/getting-started"));this.$message.error("Такого пользователя не существует.")}})}),w=x,C=(r("61d6"),Object(p["a"])(w,g,O,!1,null,"6ada511a",null)),j=C.exports,S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.currentUser?r("div",{staticClass:"wrapper"},[r("el-row",{staticClass:"search__title",style:e.searched?"margin: 20px 0 20px;":"margin: 250px 0 20px",attrs:{type:"flex",justify:e.searched?"start":"center"}},[r("el-col",{style:e.searched?"text-align: start;":"text-align: center;",attrs:{span:4}},[r("h2",[e._v("Поиск видео")])])],1),r("el-row",{attrs:{type:"flex",justify:e.searched?"start":"center",gutter:10}},[r("el-col",{attrs:{span:e.searched?21:13}},[r("el-input",{attrs:{placeholder:"Что хотите посмотреть?",value:e.currentQuery},on:{input:e.updateCurrentQuery}})],1),r("el-col",{attrs:{span:2}},[r("el-button",{attrs:{type:"primary"},on:{click:e.getVideos}},[e._v("Найти")])],1),e.searched?r("el-col",{attrs:{span:1}},[r("el-button",{attrs:{type:"danger",icon:"el-icon-star-off",circle:""},on:{click:e.openModal}})],1):e._e()],1),e.searched?r("div",{staticClass:"content"},[r("el-row",{staticClass:"content__header",attrs:{type:"flex",justify:"space-around"}},[r("el-col",{staticClass:"content__header__text",attrs:{span:22}},[r("h4",[e._v('Видео по запросу: "'+e._s(e.currentQuery.trim())+'"')])]),r("el-col",{attrs:{span:2}},[r("el-button",{attrs:{icon:"el-icon-s-unfold",circle:""},on:{click:function(t){return e.updateVideoDisplayStyle("list")}}}),r("el-button",{attrs:{icon:"el-icon-menu",circle:""},on:{click:function(t){return e.updateVideoDisplayStyle("card")}}})],1)],1),r("VideoList",{attrs:{videos:e.videos}}),r("Modal")],1):e._e()],1):r("NotAuthorized",{staticClass:"wrapper"})},M=[],I=r("1da1"),U=(r("96cf"),r("498a"),r("bc3a")),k=r.n(U),P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",["list"===e.videoDisplayStyle?r("div",e._l(e.searchedVideos.items,(function(t,a){return r("el-row",{key:a,staticClass:"video",attrs:{type:"flex",justify:"start",gutter:50}},[r("el-col",{attrs:{span:4}},[r("a",{attrs:{href:e.rootVideoUrl+t.id.videoId,target:"_blank"}},[r("img",{staticClass:"video__img",attrs:{src:t.snippet.thumbnails.medium.url,alt:"image"}})])]),r("el-col",{staticClass:"video__text",attrs:{span:14}},[r("h3",{staticClass:"video__text__top"},[r("a",{attrs:{href:e.rootVideoUrl+t.id.videoId,target:"_blank"}},[e._v(e._s(t.snippet.title))])]),r("div",{staticClass:"video__text__bottom"},[r("span",{staticClass:"video__text__bottom__bts"},[r("a",{attrs:{href:e.rootChannelUrl+t.snippet.channelId,target:"_blank"}},[e._v(" "+e._s(t.snippet.channelTitle)+" ")])]),r("span",{staticClass:"video__text__bottom__bts"},[e._v(e._s(t.snippet.publishTime.slice(0,10).split("-").reverse().join(".")))])])])],1)})),1):e._e(),"card"===e.videoDisplayStyle?r("div",{staticClass:"card__wrapper"},e._l(e.searchedVideos.items,(function(t,a){return r("div",{key:a,staticClass:"card"},[r("a",{attrs:{href:e.rootVideoUrl+t.id.videoId,target:"_blank"}},[r("img",{staticClass:"card__img",attrs:{src:t.snippet.thumbnails.medium.url,alt:"img"}})]),r("h3",{staticClass:"card__title"},[r("a",{attrs:{href:e.rootVideoUrl+t.id.videoId,target:"_blank"}},[e._v(" "+e._s(t.snippet.title)+" ")])]),r("div",{staticClass:"card__bottom"},[r("span",{staticClass:"card__bottom__bts"},[r("a",{attrs:{href:e.rootChannelUrl+t.snippet.channelId,target:"_blank"}},[e._v(" "+e._s(t.snippet.channelTitle)+" ")])]),r("span",{staticClass:"card__bottom__bts"},[e._v(e._s(t.snippet.publishTime.slice(0,10).split("-").reverse().join(".")))])])])})),0):e._e()])},F=[],N={data:function(){return{rootVideoUrl:"https://www.youtube.com/watch?v=",rootChannelUrl:"https://www.youtube.com/channel/"}},props:{videos:{type:Object}},computed:Object(o["a"])({},Object(c["c"])({currentUser:function(e){return e.currentUser},searched:function(e){return e.searched},videoDisplayStyle:function(e){return e.videoDisplayStyle},searchedVideos:function(e){return e.searchedVideos}}))},$=N,E=(r("8315"),Object(p["a"])($,P,F,!1,null,"f73bcc5c",null)),Q=E.exports,V=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-alert",{staticStyle:{width:"400px",height:"60px",margin:"50px auto"},attrs:{title:"Вы не авторизованы!",type:"warning",effect:"dark",closable:!1,center:"","show-icon":""}}),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$router.push("/")}}},[e._v("Впустите меня!")])],1)},R=[],A={},z=Object(p["a"])(A,V,R,!1,null,null,null),D=z.exports,J=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-dialog",{attrs:{title:e.modalForEdit?"Изменить запрос":"Сохранить запрос",visible:e.showModal,width:"30%",center:"","show-close":!1}},[r("el-form",{staticClass:"demo-ruleForm",attrs:{type:"flex",justify:"center","status-icon":"","label-position":"top"}},[r("el-form-item",{attrs:{label:"Запрос"}},[r("el-input",{attrs:{value:e.currentQuery,disabled:!e.modalForEdit},on:{input:e.updateCurrentQuery}})],1),r("el-form-item",{attrs:{label:"Название"}},[r("el-input",{attrs:{value:e.currentName},on:{input:e.updateCurrentName}})],1),r("el-form-item",{attrs:{label:"Сортировать по"}},[r("el-select",{attrs:{placeholder:"Укажите тип сортировки",value:e.currentOrder},on:{input:e.updateCurrentOrder}},[r("el-option",{attrs:{label:"Актуальности",value:"relevance"}}),r("el-option",{attrs:{label:"Рейтингу",value:"rating"}}),r("el-option",{attrs:{label:"Кол-ву просмотров",value:"viewCount"}}),r("el-option",{attrs:{label:"По алфавиту",value:"title"}}),r("el-option",{attrs:{label:"Кол-ву видео на канале",value:"videoCount"}})],1)],1),r("el-form-item",{attrs:{label:"Сколько видео отобразить?"}},[r("el-slider",{attrs:{min:1,max:50,value:e.currentMaxResults},on:{input:e.updateCurrentMaxResults}})],1),r("el-form-item",{attrs:{size:"small"}},[r("el-button",{attrs:{type:"primary"},on:{click:e.submitFavorite}},[e._v("Сохранить")]),r("el-button",{on:{click:e.cancelWithoutSave}},[e._v("Не сохранять")])],1)],1)],1)],1)},K=[],T={methods:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["updateShowModal","updateModalForEdit","updateFavorites","updateCurrentQuery","updateCurrentName","updateCurrentOrder","updateCurrentMaxResults","editCurrentFavorite"])),{},{submitFavorite:function(){var e=this,t={query:this.currentQuery,name:this.currentName,order:this.currentOrder,maxResults:this.currentMaxResults};this.currentQuery.length&&this.currentName.length?this.modalForEdit||this.favorites.find((function(t){return t.query===e.currentQuery}))?this.modalForEdit?this.modalForEdit&&(t.id=this.currentId,this.editCurrentFavorite(t),this.updateShowModal(!1),this.updateModalForEdit(!1),this.$message({message:"Запрос поиска отредактирован.",type:"success"})):this.$message("Вы уже искали <".concat(this.currentQuery,">")):(t.id=Date.now(),this.updateFavorites(t),this.updateShowModal(!1),this.updateModalForEdit(!1),this.$message({message:"Поиск сохранен в избранное.",type:"success"})):this.$message('Поля "Запрос" и "Название" не должны быть пустыми')},cancelWithoutSave:function(){this.updateShowModal(!1),this.updateModalForEdit(!1)}}),computed:Object(o["a"])({},Object(c["c"])({showModal:function(e){return e.showModal},modalForEdit:function(e){return e.modalForEdit},currentQuery:function(e){return e.currentQuery},currentName:function(e){return e.currentName},currentOrder:function(e){return e.currentOrder},currentMaxResults:function(e){return e.currentMaxResults},currentId:function(e){return e.currentId},favorites:function(e){return e.favorites}}))},q=T,L=Object(p["a"])(q,J,K,!1,null,"adbde9f8",null),H=L.exports,W={components:{VideoList:Q,NotAuthorized:D,Modal:H},methods:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["updateFavorites","updateSearched","updateVideoDisplayStyle","updateShowModal","updateCurrentQuery","updateCurrentName","updateCurrentOrder","updateCurrentMaxResults","updateSearchedVideos"])),{},{getVideos:function(){var e=this;return Object(I["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.a.get("https://youtube.googleapis.com/youtube/v3/search",{params:{part:"snippet",q:e.currentQuery.trim(),order:"relevance",maxResults:12,key:e.currentUser.APIKey}});case 3:r=t.sent,console.log(r.data),e.updateSearchedVideos(r.data),e.updateSearched(!0),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.$message.error(t.t0.response.data.error.message);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},openModal:function(){""!==this.currentQuery.trim()?(this.updateCurrentQuery(this.currentQuery.trim()),this.updateCurrentName(this.currentQuery.trim()),this.updateCurrentOrder("relevance"),this.updateCurrentMaxResults(12),this.updateShowModal(!0)):this.$message.error("Запрос не может быть пустым.")}}),computed:Object(o["a"])({},Object(c["c"])({currentUser:function(e){return e.currentUser},searched:function(e){return e.searched},currentQuery:function(e){return e.currentQuery}}))},Y=W,B=(r("b36a"),Object(p["a"])(Y,S,M,!1,null,"bb512ea2",null)),G=B.exports,X=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.currentUser?r("div",{staticClass:"wrapper"},[r("el-row",[r("el-col",{staticClass:"favorite__title",attrs:{type:"flex",justify:"start"}},[e._v("Избранное")])],1),r("div",{staticClass:"favorite"},e._l(e.favorites,(function(t){return r("div",{key:t.id,staticClass:"favorite__item"},[e._v(" "+e._s(t.name)+" "),r("div",[r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.getVideos(t)}}},[e._v("Выполнить")]),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.openModal(t)}}},[e._v("Изменить")]),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(r){return e.deleteCurrentFavorite(t)}}},[e._v("Удалить")])],1)])})),0),r("Modal")],1):r("NotAuthorized",{staticClass:"wrapper"})},Z=[],ee={components:{Modal:H,NotAuthorized:D},methods:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["updateShowModal","updateModalForEdit","updateFavorites","updateCurrentQuery","updateCurrentName","updateCurrentOrder","updateCurrentMaxResults","updateCurrentId","deleteCurrentFavorite","updateSearchedVideos","updateSearched"])),{},{getVideos:function(e){var t=this;return Object(I["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,k.a.get("https://youtube.googleapis.com/youtube/v3/search",{params:{part:"snippet",q:e.query,order:e.order,maxResults:e.maxResults,key:t.currentUser.APIKey}});case 3:a=r.sent,t.updateSearchedVideos(a.data),t.updateSearched(!0),t.$router.push("/main"),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](0),t.$message.error(r.t0.response.data.error.message);case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()},openModal:function(e){this.updateCurrentQuery(e.query),this.updateCurrentName(e.name),this.updateCurrentOrder(e.order),this.updateCurrentMaxResults(e.maxResults),this.updateCurrentId(e.id),this.updateModalForEdit(!0),this.updateShowModal(!0)}}),computed:Object(o["a"])({},Object(c["c"])({currentUser:function(e){return e.currentUser},favorites:function(e){return e.favorites}}))},te=ee,re=(r("1b46"),Object(p["a"])(te,X,Z,!1,null,"34fc13c1",null)),ae=re.exports;a["default"].use(_["a"]);var ne=[{path:"/",component:j},{path:"/main",component:G},{path:"/favorite",component:ae}],se=new _["a"]({mode:"history",base:"/youtube-search/",routes:ne}),oe=se,ue=(r("c740"),r("a434"),r("a53c"));a["default"].use(c["a"]);var ie=new c["a"].Store({state:{users:ue,currentUser:null,favorites:[],searched:!1,videoDisplayStyle:"list",showModal:!1,modalForEdit:!1,currentQuery:"",currentName:"",currentOrder:"",currentMaxResults:"",currentId:"",searchedVideos:{items:[]}},mutations:{updateUser:function(e,t){e.currentUser=t,e.favorites=JSON.parse(localStorage.getItem(e.currentUser.name))||[]},loginOut:function(e){e.currentUser=null,localStorage.removeItem("currentUser")},updateFavorites:function(e,t){e.favorites.find((function(e){return e.id===t.id}))||e.modalForEdit||(e.favorites.push(t),localStorage.setItem(e.currentUser.name,JSON.stringify(e.favorites)))},editCurrentFavorite:function(e,t){var r=e.favorites.findIndex((function(e){return e.id===t.id}));e.favorites.splice(r,1,t),localStorage.setItem(e.currentUser.name,JSON.stringify(e.favorites))},deleteCurrentFavorite:function(e,t){var r=e.favorites.findIndex((function(e){return e.id===t.id}));e.favorites.splice(r,1),localStorage.setItem(e.currentUser.name,JSON.stringify(e.favorites))},updateSearched:function(e,t){e.searched=t},updateVideoDisplayStyle:function(e,t){e.videoDisplayStyle=t},updateShowModal:function(e,t){e.showModal=t},updateModalForEdit:function(e,t){e.modalForEdit=t},updateCurrentQuery:function(e,t){e.currentQuery=t},updateCurrentName:function(e,t){e.currentName=t},updateCurrentOrder:function(e,t){e.currentOrder=t},updateCurrentMaxResults:function(e,t){e.currentMaxResults=t},updateCurrentId:function(e,t){e.currentId=t},updateSearchedVideos:function(e,t){e.searchedVideos=t}},actions:{},modules:{}}),ce=r("5c96"),le=r.n(ce);r("0fae");a["default"].config.productionTip=!1,a["default"].use(le.a),a["default"].use(ie),new a["default"]({router:oe,store:ie,render:function(e){return e(y)}}).$mount("#app")},5995:function(e,t,r){},"5c0b":function(e,t,r){"use strict";r("9c0c")},"61d6":function(e,t,r){"use strict";r("b4d4")},8315:function(e,t,r){"use strict";r("5995")},"9b19":function(e,t,r){e.exports=r.p+"img/logo.38aa05fc.svg"},"9c0c":function(e,t,r){},a53c:function(e){e.exports=JSON.parse('[{"id":1,"name":"admin","password":"admin","jwt":"NGEOOzQwfASPJgmlz2iyO2edPS6wbHOLoTBIUUOFRNA"},{"id":2,"name":"user","password":"user","jwt":"22vH9AxxT_Ub-Iefh06p3gl6xI_A_DxK985AUEj8b28"}]')},b36a:function(e,t,r){"use strict";r("c626")},b4d4:function(e,t,r){},c626:function(e,t,r){},cfd1:function(e,t,r){"use strict";r("5061")},fd19:function(e,t,r){}});
//# sourceMappingURL=app.d1d0d644.js.map